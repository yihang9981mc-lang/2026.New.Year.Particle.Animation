<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026æ–°å¹´ç²’å­åŠ¨ç”»ç¥ç¦ï¼ˆç²¾å‡†å€’è®¡æ—¶è§¦å‘ç‰ˆï¼‰</title>
<style>
* {margin: 0; padding: 0; box-sizing: border-box;}
body {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: #000;
    overflow: hidden;
}
.container {
    width: 100vw;
    height: 100vh;
    position: relative;
    background: radial-gradient(#111, #000);
    overflow: hidden;
}
#fireworkCanvas, #particleCanvas {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    overflow: hidden;
    opacity: 0; /* åˆå§‹éšè—ç²’å­ç”»å¸ƒ */
    transition: opacity 1s ease; /* æ¸æ˜¾åŠ¨ç”» */
}
#fireworkCanvas {z-index: 0;}
#particleCanvas {z-index: 1;}
/* å®æ—¶æ—¶é—´ + æ–°å¹´å€’è®¡æ—¶æ ·å¼ */
.time-container {
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 3;
    font-family: Arial, "Microsoft YaHei", sans-serif;
    color: #ffffff;
}
.real-time {
    font-size: 2vw;
    font-weight: bold;
    text-shadow: 0 0 8px #ffffff, 0 0 15px #ffffff;
    margin-bottom: 8px;
}
.new-year-countdown {
    font-size: 1.8vw;
    font-weight: bold;
    text-shadow: 0 0 8px #ffdd59, 0 0 15px #ffdd59;
    color: #ffdd59;
}
/* å€’è®¡æ—¶ç­‰å¾…æ–‡å­— */
.wait-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    font-size: 6vw;
    font-weight: bold;
    color: #ffffff;
    text-shadow: 0 0 10px #ffffff, 0 0 20px #ffffff, 0 0 30px #ffffff;
    opacity: 1;
    transition: opacity 1s ease;
}
.text-layer {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 2;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 8vw;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.5s ease;
    color: #ffffff;
    text-shadow: 0 0 10px #ffffff, 0 0 20px #ffffff, 0 0 30px #ffffff;
}
.text-layer.active {opacity: 1;}
.countdown-layer { 
    font-size: 12vw; 
    text-shadow: 0 0 15px #ffffff, 0 0 30px #ffffff, 0 0 45px #ffffff, 0 0 60px #ffffff; 
}
.english-layer { 
    font-size: 6vw; 
    letter-spacing: 0.5vw; 
}
</style>
</head>
<body>
<div class="container">
    <!-- å®æ—¶æ—¶é—´ + æ–°å¹´å€’è®¡æ—¶å®¹å™¨ -->
    <div class="time-container">
        <div class="real-time" id="realTime"></div>
        <div class="new-year-countdown" id="newYearCountdown"></div>
    </div>
    <!-- å€’è®¡æ—¶ç­‰å¾…æç¤º -->
    <div class="wait-text" id="waitText">ç­‰å¾…2026æ–°å¹´åˆ°æ¥...</div>
    <canvas id="fireworkCanvas"></canvas>
    <canvas id="particleCanvas"></canvas>
    <div class="text-layer" id="t1">2026</div>
    <div class="text-layer" id="t2">æ–°å¹´å¿«ä¹</div>
    <div class="text-layer" id="t3">ä¸‡äº‹é¡ºæ„</div>
    <div class="text-layer" id="t4">å¹³å®‰å–œä¹</div>
    <div class="text-layer" id="t5">å‰ç¨‹ä¼¼é”¦</div>
    <div class="text-layer" id="t6">é˜–å®¶å¹¸ç¦</div>
    <div class="text-layer" id="t7">è´¢æºå¹¿è¿›</div>
    <div class="text-layer" id="t8">å¥½è¿è¿è¿</div>
    <div class="text-layer english-layer" id="t10">2026 HAPPY NEW YEAR</div>
</div>

<script>
(function(){
    // è·å–ç”»å¸ƒå’Œä¸Šä¸‹æ–‡
    const fCanvas = document.getElementById('fireworkCanvas');
    const fCtx = fCanvas.getContext('2d');
    const pCanvas = document.getElementById('particleCanvas');
    const pCtx = pCanvas.getContext('2d');
    // æ—¶é—´DOM
    const realTimeEl = document.getElementById('realTime');
    const newYearCountdownEl = document.getElementById('newYearCountdown');
    // ç­‰å¾…æ–‡å­—DOM
    const waitTextEl = document.getElementById('waitText');

    // å…¨å±€å˜é‡
    let fireworks = [], fParticles = [], pParticles = [];
    let currentIdx = 0, switchInterval = null;
    const texts = ['2026','æ–°å¹´å¿«ä¹','ä¸‡äº‹é¡ºæ„','å¹³å®‰å–œä¹','å‰ç¨‹ä¼¼é”¦','é˜–å®¶å¹¸ç¦','è´¢æºå¹¿è¿›','å¥½è¿è¿è¿','2026 HAPPY NEW YEAR'];
    const pCount = 1000; 
    const particleSize = 1.2; 
    let centerX=0, centerY=0;
    // æ–‡å­—ç²’å­ä¸“å±è¾¹ç•Œé™åˆ¶
    const textParticlePadding = 40; 
    let textSafeWidth = 0; 
    let textSafeHeight = 0;
    // åŠ¨ç”»çŠ¶æ€æ ‡è®°
    let isAnimationStarted = false;

    // ========== æ ¸å¿ƒé…ç½®ï¼šæ–°å¹´å€’è®¡æ—¶ç›®æ ‡æ—¶é—´ï¼ˆ2026å¹´å…ƒæ—¦ 00:00:00ï¼‰ ==========
    const TARGET_NEW_YEAR = new Date('2026-01-01 00:00:00');

    // æ–‡å­—IDæ˜ å°„ï¼ˆç§»é™¤3/2/1å€’è®¡æ—¶ï¼‰
    const textConfigMap = {
        0: {id: 't1'},
        1: {id: 't2'},
        2: {id: 't3'},
        3: {id: 't4'},
        4: {id: 't5'},
        5: {id: 't6'},
        6: {id: 't7'},
        7: {id: 't8'},
        8: {id: 't10'}
    };

    // ========== 1. å®æ—¶æ—¶é—´æ ¼å¼åŒ– ==========
    function formatRealTime() {
        const now = new Date();
        const pad = num => num.toString().padStart(2, '0');
        
        const year = now.getFullYear();
        const month = pad(now.getMonth() + 1);
        const day = pad(now.getDate());
        const hour = pad(now.getHours());
        const minute = pad(now.getMinutes());
        const second = pad(now.getSeconds());
        
        return `${year}å¹´${month}æœˆ${day}æ—¥ ${hour}:${minute}:${second}`;
    }

    // ========== 2. æ–°å¹´å€’è®¡æ—¶è®¡ç®—ï¼ˆå¤©/æ—¶/åˆ†/ç§’ï¼‰ ==========
    function calculateNewYearCountdown() {
        const now = new Date();
        const timeDiff = TARGET_NEW_YEAR - now;

        // å¦‚æœå·²ç»åˆ°äº†æ–°å¹´ï¼Œå¯åŠ¨åŠ¨ç”»
        if (timeDiff <= 0) {
            if (!isAnimationStarted) {
                startNewYearAnimation();
            }
            return '2026æ–°å¹´å¿«ä¹ï¼ğŸ‰';
        }

        // è®¡ç®—å¤©/æ—¶/åˆ†/ç§’
        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

        // è¡¥é›¶
        const pad = num => num.toString().padStart(2, '0');
        return `è·ç¦»2026æ–°å¹´è¿˜æœ‰ï¼š${days}å¤©${pad(hours)}æ—¶${pad(minutes)}åˆ†${pad(seconds)}ç§’`;
    }

    // ========== 3. æ›´æ–°æ—¶é—´æ˜¾ç¤ºï¼ˆå®æ—¶æ—¶é—´ + æ–°å¹´å€’è®¡æ—¶ï¼‰ ==========
    function updateAllTime() {
        // æ›´æ–°å®æ—¶æ—¶é—´
        realTimeEl.textContent = formatRealTime();
        // æ›´æ–°æ–°å¹´å€’è®¡æ—¶
        newYearCountdownEl.textContent = calculateNewYearCountdown();
        // æ¯ç§’æ›´æ–°
        setTimeout(updateAllTime, 1000);
    }

    // ========== 4. å¯åŠ¨æ–°å¹´åŠ¨ç”»ï¼ˆæ ¸å¿ƒï¼šå€’è®¡æ—¶ç»“æŸåæ‰§è¡Œï¼‰ ==========
    function startNewYearAnimation() {
        // æ ‡è®°åŠ¨ç”»å·²å¯åŠ¨
        isAnimationStarted = true;
        
        // éšè—ç­‰å¾…æ–‡å­—
        waitTextEl.style.opacity = 0;
        
        // æ˜¾ç¤ºç²’å­ç”»å¸ƒï¼ˆæ¸æ˜¾ï¼‰
        fCanvas.style.opacity = 1;
        pCanvas.style.opacity = 1;
        
        // åˆå§‹åŒ–ç²’å­
        resize();
        createPParticles(texts[0]);
        document.getElementById('t1').classList.add('active');
        
        // å¯åŠ¨ç¥ç¦è¯­åˆ‡æ¢
        switchInterval = setInterval(() => {
            currentIdx = (currentIdx + 1) % texts.length;
            createPParticles(texts[currentIdx]);
            document.querySelectorAll('.text-layer').forEach(el => el.classList.remove('active'));
            const currentConfig = textConfigMap[currentIdx];
            if(currentConfig) document.getElementById(currentConfig.id).classList.add('active');
        }, 1800);
        
        // å¯åŠ¨åŠ¨ç”»ä¸»å¾ªç¯
        animate();
    }

    // çª—å£å¤§å°è°ƒæ•´
    function resize(){
        fCanvas.width = pCanvas.width = window.innerWidth;
        fCanvas.height = pCanvas.height = window.innerHeight;
        
        centerX = window.innerWidth / 2;
        centerY = window.innerHeight / 2;
        textSafeWidth = window.innerWidth - textParticlePadding * 2;
        textSafeHeight = window.innerHeight - textParticlePadding * 2;
    }

    // çƒŸèŠ±ç±»
    class Firework{
        constructor(){
            this.x = Math.random()*fCanvas.width;
            this.y = fCanvas.height;
            this.targetY = Math.random()*fCanvas.height*0.4;
            this.targetX = Math.random()*fCanvas.width;
            this.vx = (this.targetX-this.x)/70;
            this.vy = (this.targetY-this.y)/70 - Math.random()*2;
            this.ay = 0.02;
            this.color = '#ffffff';
            this.exploded = false;
        }
        update(){
            if(!this.exploded){
                this.vy += this.ay;
                this.x += this.vx;
                this.y += this.vy;
                if(Math.abs(this.x-this.targetX)<3 && Math.abs(this.y-this.targetY)<3){
                    this.explode();
                    this.exploded = true;
                }
            }
        }
        explode(){
            for(let i=0;i<60;i++) fParticles.push(new FParticle(this.x,this.y));
        }
        draw(){
            if(!this.exploded){
                fCtx.beginPath();
                fCtx.moveTo(this.x,this.y);
                fCtx.lineTo(this.x-this.vx*3,this.y-this.vy*3);
                fCtx.strokeStyle = this.color;
                fCtx.lineWidth = 3;
                fCtx.stroke();
            }
        }
    }

    // çƒŸèŠ±ç²’å­ç±»
    class FParticle{
        constructor(x,y){
            this.x=x; this.y=y;
            this.vx=(Math.random()-0.5)*6;
            this.vy=(Math.random()-0.5)*6;
            this.ay=0.08;
            this.color='#ffffff';
            this.alpha=1;
            this.decay=Math.random()*0.015+0.005;
        }
        update(){ 
            this.vy+=this.ay; 
            this.x+=this.vx; 
            this.y+=this.vy; 
            this.alpha-=this.decay; 
            if(this.x < 0 || this.x > fCanvas.width || this.y < 0 || this.y > fCanvas.height){
                this.alpha = 0;
            }
        }
        draw(){
            if(this.alpha <= 0) return;
            fCtx.save();
            fCtx.globalAlpha=this.alpha;
            fCtx.beginPath();
            fCtx.arc(this.x,this.y,3,0,Math.PI*2);
            fCtx.fillStyle=this.color;
            fCtx.shadowColor = '#ffffff';
            fCtx.shadowBlur = 10;
            fCtx.fill();
            fCtx.restore();
        }
    }

    // åˆ›å»ºæ–‡å­—ç²’å­
    function createPParticles(text){
        pParticles = [];
        pCtx.clearRect(0, 0, pCanvas.width, pCanvas.height);
        
        let fontSize = Math.min(
            textSafeHeight * 0.4,
            textSafeWidth / text.length * 1.2,
            window.innerHeight * 0.4
        );
        if(text.includes('HAPPY NEW YEAR')) fontSize = Math.min(textSafeHeight * 0.25, window.innerHeight * 0.25);
        
        pCtx.font = `bold ${fontSize}px Arial, "Microsoft YaHei", sans-serif`;
        pCtx.textAlign = 'center'; 
        pCtx.textBaseline = 'middle';
        pCtx.fillStyle = '#ffffff';
        pCtx.fillText(text, centerX, centerY);

        const imgData = pCtx.getImageData(0, 0, pCanvas.width, pCanvas.height);
        const pixels = imgData.data;
        const valid = [];
        
        for(let y = textParticlePadding; y < window.innerHeight - textParticlePadding; y += 3){
            for(let x = textParticlePadding; x < window.innerWidth - textParticlePadding; x += 3){
                const i = (y * pCanvas.width + x) * 4;
                if(pixels[i+3] > 128){
                    valid.push({x, y});
                }
            }
        }
        
        const defaultPos = {x: centerX, y: centerY};
        
        for(let i=0; i<pCount; i++){
            const pos = valid[Math.floor(Math.random() * valid.length)] || defaultPos;
            const startX = textParticlePadding + Math.random() * textSafeWidth;
            const startY = textParticlePadding + Math.random() * textSafeHeight;
            
            pParticles.push({
                x: startX, 
                y: startY, 
                targetX: pos.x, 
                targetY: pos.y, 
                size: particleSize, 
                color: '#ffffff', 
                speed: 1.5
            });
        }
    }

    // æ›´æ–°æ–‡å­—ç²’å­
    function updatePParticles(){
        pCtx.clearRect(0, 0, pCanvas.width, pCanvas.height);
        pParticles.forEach(p => {
            const dx = p.targetX - p.x;
            const dy = p.targetY - p.y;
            const ease = 0.05 + Math.random() * 0.01;
            
            p.x += dx * ease * p.speed;
            p.y += dy * ease * p.speed;

            p.x = Math.max(textParticlePadding, Math.min(window.innerWidth - textParticlePadding, p.x));
            p.y = Math.max(textParticlePadding, Math.min(window.innerHeight - textParticlePadding, p.y));

            pCtx.shadowColor = '#ffffff'; 
            pCtx.shadowBlur = 8;
            pCtx.beginPath();
            pCtx.arc(p.x, p.y, particleSize, 0, Math.PI*2);
            pCtx.fillStyle = '#ffffff';
            pCtx.fill();
            pCtx.shadowBlur = 0;
        });
    }

    // åŠ¨ç”»ä¸»å¾ªç¯
    function animate(){
        if (!isAnimationStarted) return; // æœªåˆ°æ—¶é—´ä¸æ‰§è¡ŒåŠ¨ç”»
        
        fCtx.fillStyle = 'rgba(0,0,0,0.05)';
        fCtx.fillRect(0, 0, fCanvas.width, fCanvas.height);

        if(Math.random() < 0.03) fireworks.push(new Firework());
        
        fireworks = fireworks.filter(f => !f.exploded || fParticles.length > 0);
        fireworks.forEach(f => {f.update(); f.draw();});

        fParticles = fParticles.filter(p => p.alpha > 0);
        fParticles.forEach(p => {p.update(); p.draw();});

        updatePParticles();
        
        requestAnimationFrame(animate);
    }

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function(){
        // å¯åŠ¨æ—¶é—´æ›´æ–°ï¼ˆå®æ—¶æ—¶é—´ + æ–°å¹´çœŸå®å€’è®¡æ—¶ï¼‰
        updateAllTime();
        
        // ç›‘å¬çª—å£å¤§å°å˜åŒ–
        window.addEventListener('resize', () => {
            if (isAnimationStarted) resize();
        });

        // æµ‹è¯•ç”¨ï¼šç«‹å³å¯åŠ¨åŠ¨ç”»ï¼ˆæ³¨é‡Šæ‰ä¸‹é¢è¿™è¡Œï¼Œæ¢å¤çœŸå®å€’è®¡æ—¶é€»è¾‘ï¼‰
        // startNewYearAnimation();
    });
})();
</script>
</body>
</html>